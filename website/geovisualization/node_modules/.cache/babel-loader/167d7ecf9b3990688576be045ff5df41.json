{"ast":null,"code":"var _jsxFileName = \"/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv01.js\";\n// ============================= Google Maps TEST =============================\n// AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM\nimport React, { Component } from 'react';\nimport { compose } from \"recompose\";\nimport { withScriptjs, withGoogleMap, Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css';\nconst mapStyles = {\n  top: '0',\n  buttom: '0',\n  width: 'auto',\n  height: 'auto',\n  left: '300px'\n};\nconst MapWithAMarker = compose(withScriptjs, withGoogleMap)(props => {\n  return /*#__PURE__*/React.createElement(Map, {\n    google: this.props.google,\n    style: mapStyles,\n    zoom: 11,\n    initialCenter: {\n      lat: 13.407180,\n      lng: 99.998090\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }, props.markers.map(marker => {\n    const onClick = props.onClick.bind(this, marker);\n    return /*#__PURE__*/React.createElement(Marker, {\n      key: marker.id,\n      onClick: onClick,\n      position: {\n        lat: marker.latitude,\n        lng: marker.longitude\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 21\n      }\n    }, props.selectedMarker === marker && /*#__PURE__*/React.createElement(InfoWindow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 25\n      }\n    }, marker.shelter)), \"}\");\n  }));\n});\n\nclass MapContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      provinceResponse: [],\n      placeResponse: [],\n      placeTarget: [],\n      coor: {},\n      clickedPlace: '',\n      targetProvince: '',\n      threadId: '',\n      threadTitle: ''\n    };\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true,\n      clickedPlace: props.name\n    });\n\n    this.onMapClicked = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`http://localhost:30011/getRankProvince`, {\n      params: {\n        provinceRank: 1\n      }\n    }).then(res => {\n      const provinceResponse = res.data[0];\n      this.setState({\n        provinceResponse\n      });\n      this.setState({\n        targetProvince: this.state.provinceResponse.provinceTh\n      });\n      console.log(this.state.targetProvince);\n    });\n    axios.get(`http://localhost:30011/getThreadData`, {\n      params: {\n        // provinceTh: this.state.targetProvince\n        provinceTh: \"สมุทรสงคราม\"\n      }\n    }).then(res => {\n      this.setState({\n        placeResponse: res.data\n      }); // console.log(res.data);\n\n      const latLon = this.state.placeResponse.map(row => {\n        return row.coor;\n      });\n      this.setState({\n        coor: latLon\n      });\n      console.log(this.state.coor);\n    });\n  }\n\n  // renderMarkers() {\n  //     return this.state.coor.map( i => {\n  //         return i.map( d => {\n  //             return <Marker\n  //                 key={ d }\n  //                 // onClick = { this.onMarkerClick }\n  //                 // title = { location.locName }\n  //                 // position = { JSON.parse(location.position) }\n  //                 // desc = { location.desc }\n  //                 // animation = { this.state.animation[i] }\n  //                 // name = { location.locName } />\n  //                 onClick={this.onMarkerClick}\n  //                 name={d.placeName}\n  //                 position={{lat: d.lat, lng: d.lon}} />\n  //             })\n  //     })\n  // }\n  // renderMarkers() {\n  //     return this.state.coor.map( i => {\n  //         return <Marker\n  //             key={ i }\n  //             // onClick = { this.onMarkerClick }\n  //             // title = { location.locName }\n  //             // position = { JSON.parse(location.position) }\n  //             // desc = { location.desc }\n  //             // animation = { this.state.animation[i] }\n  //             // name = { location.locName } />\n  //             onClick={this.onMarkerClick}\n  //             name={i.placeName}\n  //             position={{lat: i.lat, lng: i.lon}} />\n  //         })\n  // }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"noscroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavbarMaps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidenav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidePlaceName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, this.state.targetProvince), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sideClickedPlace\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, this.state.clickedPlace)), /*#__PURE__*/React.createElement(Map, {\n      google: this.props.google,\n      style: mapStyles,\n      zoom: 11,\n      initialCenter: {\n        lat: 13.407180,\n        lng: 99.998090\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }, this.state.selectedPlace.name))));\n  }\n\n} // export default MapContainer;\n\n\nexport default GoogleApiWrapper({\n  // apiKey: ('AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM')\n  apiKey: 'AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI'\n})(MapContainer);","map":{"version":3,"sources":["/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv01.js"],"names":["React","Component","compose","withScriptjs","withGoogleMap","Map","InfoWindow","Marker","GoogleApiWrapper","axios","NavbarMaps","mapStyles","top","buttom","width","height","left","MapWithAMarker","props","google","lat","lng","markers","map","marker","onClick","bind","id","latitude","longitude","selectedMarker","shelter","MapContainer","state","showingInfoWindow","activeMarker","selectedPlace","provinceResponse","placeResponse","placeTarget","coor","clickedPlace","targetProvince","threadId","threadTitle","onMarkerClick","e","setState","name","onMapClicked","componentDidMount","get","params","provinceRank","then","res","data","provinceTh","console","log","latLon","row","render","apiKey"],"mappings":"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","sourcesContent":["// ============================= Google Maps TEST =============================\n// AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM\n\nimport React, { Component } from 'react';\nimport { compose } from \"recompose\"\nimport { withScriptjs, withGoogleMap, Map, InfoWindow, Marker, GoogleApiWrapper} from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css'\n\nconst mapStyles = {\n    top: '0',\n    buttom: '0',\n    width: 'auto',\n    height: 'auto',\n    left: '300px',\n};\n\nconst MapWithAMarker = compose(withScriptjs, withGoogleMap)( props => {\n    return (\n        <Map google={this.props.google}\n            style={mapStyles}\n            zoom={11}\n            initialCenter={{lat: 13.407180, lng: 99.998090}}\n        >\n            {props.markers.map(marker => {\n            const onClick = props.onClick.bind(this, marker)\n                return (\n                    <Marker\n                        key={marker.id}\n                        onClick={onClick}\n                        position={{ lat: marker.latitude, lng: marker.longitude }}\n                    >\n                    {props.selectedMarker === marker &&\n                        <InfoWindow>\n                        <div>\n                            {marker.shelter}\n                        </div>\n                        </InfoWindow>}\n                    }\n                    </Marker>\n                )\n            })}\n        </Map>\n    )\n  })\nclass MapContainer extends Component {    \n    state = {\n        showingInfoWindow: false,\n        activeMarker: {},\n        selectedPlace: {},\n        provinceResponse:[],        \n        placeResponse:[],\n        placeTarget:[],\n        coor:{},\n        clickedPlace: '',\n        targetProvince: '',\n        threadId:'',\n        threadTitle: '',\n\n    };\n    \n    componentDidMount() {\n        axios.get(`http://localhost:30011/getRankProvince`, {\n            params: {\n                provinceRank: 1\n            }\n        })\n            .then(res => {\n                const provinceResponse = res.data[0];\n                this.setState({ provinceResponse });\n                this.setState({ targetProvince: this.state.provinceResponse.provinceTh })\n                console.log(this.state.targetProvince);\n        })\n\n        axios.get(`http://localhost:30011/getThreadData`, {\n            params: {\n                // provinceTh: this.state.targetProvince\n                provinceTh: \"สมุทรสงคราม\"\n            }\n        })\n        .then(res => {\n            this.setState({ placeResponse: res.data });\n            // console.log(res.data);\n            const latLon = this.state.placeResponse.map(row => {\n                return row.coor\n            })\n            this.setState({coor: latLon})\n            console.log(this.state.coor);\n\n            \n\n        })  \n    }\n\n    onMarkerClick = (props, marker, e) =>\n    this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true,\n        clickedPlace: props.name,\n    });\n\n    onMapClicked = (props) => {\n        if (this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            })\n        }\n    };\n\n    // renderMarkers() {\n    //     return this.state.coor.map( i => {\n    //         return i.map( d => {\n    //             return <Marker\n    //                 key={ d }\n    //                 // onClick = { this.onMarkerClick }\n    //                 // title = { location.locName }\n    //                 // position = { JSON.parse(location.position) }\n    //                 // desc = { location.desc }\n    //                 // animation = { this.state.animation[i] }\n    //                 // name = { location.locName } />\n    //                 onClick={this.onMarkerClick}\n    //                 name={d.placeName}\n    //                 position={{lat: d.lat, lng: d.lon}} />\n    //             })\n    //     })\n    // }\n\n    // renderMarkers() {\n    //     return this.state.coor.map( i => {\n    //         return <Marker\n    //             key={ i }\n    //             // onClick = { this.onMarkerClick }\n    //             // title = { location.locName }\n    //             // position = { JSON.parse(location.position) }\n    //             // desc = { location.desc }\n    //             // animation = { this.state.animation[i] }\n    //             // name = { location.locName } />\n    //             onClick={this.onMarkerClick}\n    //             name={i.placeName}\n    //             position={{lat: i.lat, lng: i.lon}} />\n    //         })\n    // }\n\n\n    render() {\n        return (  \n            <div class=\"noscroll\">\n                <NavbarMaps />\n                <div class=\"sidenav\">\n                    <div class=\"sidePlaceName\">{this.state.targetProvince}</div>\n                    <div class=\"sideClickedPlace\">{this.state.clickedPlace}</div>\n\n                </div>\n\n                <Map google={this.props.google}\n                    style={mapStyles}\n                    zoom={11}\n                    initialCenter={{lat: 13.407180, lng: 99.998090}}\n                >\n                    {/* <div> {this.renderMarkers()} </div> */}\n                    {/* {this.state.coor.map( thread => {\n                        thread.map( d => (\n                            <Marker\n                                onClick={this.onMarkerClick}\n                                name={d.placeName}\n                                position={{lat: d.lat, lng: d.lon}} \n                            />\n                        ))})} */}\n\n                    {/* <Marker\n                        onClick={this.onMarkerClick}\n                        name={\"test\"}\n                        position={{lat: 18.7749045, lng: 100.771892}} \n                    /> */}\n\n                    <InfoWindow\n                        marker={this.state.activeMarker}\n                        visible={this.state.showingInfoWindow}>\n                        <p>{this.state.selectedPlace.name}</p>\n                    </InfoWindow>\n                </Map>\n            </div>\n        );\n    }\n}\n\n// export default MapContainer;\n\nexport default GoogleApiWrapper({\n    // apiKey: ('AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM')\n    apiKey: ('AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI')\n})(MapContainer)"]},"metadata":{},"sourceType":"module"}