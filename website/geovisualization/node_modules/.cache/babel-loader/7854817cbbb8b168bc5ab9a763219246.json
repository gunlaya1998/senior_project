{"ast":null,"code":"var _jsxFileName = \"/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv01.js\";\n// ============================= Google Maps TEST =============================\n// AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM\nimport React, { Component } from 'react';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css';\nconst mapStyles = {\n  top: '0',\n  buttom: '0',\n  width: 'auto',\n  height: 'auto',\n  left: '300px'\n};\n\nclass MapContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      provinceResponse: [],\n      placeResponse: [],\n      placeTarget: [],\n      placeList: [],\n      coor: [],\n      clickedPlace: '',\n      targetProvince: '',\n      threadId: '',\n      threadTitle: ''\n    };\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true,\n      clickedPlace: props.name\n    });\n\n    this.onMapClicked = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`http://localhost:30011/getRankProvince`, {\n      params: {\n        provinceRank: 1\n      }\n    }).then(res => {\n      const provinceResponse = res.data[0];\n      this.setState({\n        provinceResponse\n      });\n      this.setState({\n        targetProvince: this.state.provinceResponse.provinceTh\n      });\n    });\n    axios.get(`http://localhost:30011/getThreadData`, {\n      params: {\n        // provinceTh: this.state.targetProvince\n        provinceTh: \"สมุทรสงคราม\"\n      }\n    }).then(res => {\n      this.setState({\n        placeResponse: res.data\n      }); // console.log(this.state.placeResponse[0].placeList);\n      // this.setState({placeList: this.state.placeResponse.placeList})\n\n      var tmp = [];\n      this.state.placeResponse.map(row => row.coor.forEach(function (data) {\n        tmp.push(data);\n      }));\n      this.setState({\n        coor: tmp\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"noscroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavbarMaps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidenav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidePlaceName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, this.state.targetProvince), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sideClickedPlace\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, this.state.clickedPlace), this.state.placeResponse.map(place => {\n      return this.state.clickedPlace === place.placeList ? /*#__PURE__*/React.createElement(\"a\", {\n        href: `https://pantip.com/topic/${this.state.placeResponse.threadId}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"sideLinkBox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"sideLinkTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 37\n        }\n      }, this.state.placeResponse.threadTitle))) : null;\n    })), /*#__PURE__*/React.createElement(Map, {\n      google: this.props.google,\n      style: mapStyles,\n      zoom: 11,\n      initialCenter: {\n        lat: 13.407180,\n        lng: 99.998090\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, this.state.coor.map(place => {\n      return place.province === this.state.targetProvince ? /*#__PURE__*/React.createElement(Marker, {\n        key: place.placeId,\n        onClick: this.onMarkerClick,\n        name: place.placeName,\n        position: {\n          lat: place.lat,\n          lng: place.lon\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }\n      }) : null;\n    }), /*#__PURE__*/React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    }, this.state.selectedPlace.name))));\n  }\n\n} // export default MapContainer;\n\n\nexport default GoogleApiWrapper({\n  // apiKey: ('AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM')\n  apiKey: 'AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI'\n})(MapContainer);","map":{"version":3,"sources":["/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv01.js"],"names":["React","Component","Map","InfoWindow","Marker","GoogleApiWrapper","axios","NavbarMaps","mapStyles","top","buttom","width","height","left","MapContainer","state","showingInfoWindow","activeMarker","selectedPlace","provinceResponse","placeResponse","placeTarget","placeList","coor","clickedPlace","targetProvince","threadId","threadTitle","onMarkerClick","props","marker","e","setState","name","onMapClicked","componentDidMount","get","params","provinceRank","then","res","data","provinceTh","tmp","map","row","forEach","push","render","place","google","lat","lng","province","placeId","placeName","lon","apiKey"],"mappings":"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","sourcesContent":["// ============================= Google Maps TEST =============================\n// AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM\n\nimport React, { Component } from 'react';\nimport {Map, InfoWindow, Marker, GoogleApiWrapper} from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css'\n\nconst mapStyles = {\n    top: '0',\n    buttom: '0',\n    width: 'auto',\n    height: 'auto',\n    left: '300px',\n};\nclass MapContainer extends Component {    \n    state = {\n        showingInfoWindow: false,\n        activeMarker: {},\n        selectedPlace: {},\n        provinceResponse:[],        \n        placeResponse:[],\n        placeTarget:[],\n        placeList:[], \n        coor:[],\n        clickedPlace: '',\n        targetProvince: '',\n        threadId:'',\n        threadTitle: '',\n\n    };\n    \n    componentDidMount() {\n        axios.get(`http://localhost:30011/getRankProvince`, {\n            params: {\n                provinceRank: 1\n            }\n        })\n            .then(res => {\n                const provinceResponse = res.data[0];\n                this.setState({ provinceResponse });\n                this.setState({ targetProvince: this.state.provinceResponse.provinceTh })\n        })\n\n        axios.get(`http://localhost:30011/getThreadData`, {\n            params: {\n                // provinceTh: this.state.targetProvince\n                provinceTh: \"สมุทรสงคราม\"\n            }\n        })\n        .then(res => {\n            this.setState({ placeResponse: res.data });\n            // console.log(this.state.placeResponse[0].placeList);\n            // this.setState({placeList: this.state.placeResponse.placeList})\n\n            var tmp = []\n            this.state.placeResponse.map(row => \n                row.coor.forEach(function(data){\n                    tmp.push(data);\n                })\n            )\n            this.setState({coor: tmp})\n\n        })  \n    }\n\n    onMarkerClick = (props, marker, e) =>\n    this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true,\n        clickedPlace: props.name,\n    });\n\n    onMapClicked = (props) => {\n        if (this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            })\n        }\n    };\n\n    render() {\n        return (  \n            <div class=\"noscroll\">\n                <NavbarMaps />\n                <div class=\"sidenav\">\n                    <div class=\"sidePlaceName\">{this.state.targetProvince}</div>\n                    <div class=\"sideClickedPlace\">{this.state.clickedPlace}</div>\n\n                    {this.state.placeResponse.map( place => {\n                        return this.state.clickedPlace === place.placeList ?\n                            <a href={`https://pantip.com/topic/${this.state.placeResponse.threadId}`}>\n                                <div class=\"sideLinkBox\">\n                                    <div class=\"sideLinkTitle\">\n                                        {this.state.placeResponse.threadTitle}\n                                    </div>\n                                </div>  \n                            </a>\n                            : null\n                        }                     \n                    )}\n                </div>\n\n                <Map google={this.props.google}\n                    style={mapStyles}\n                    zoom={11}\n                    initialCenter={{lat: 13.407180, lng: 99.998090}}\n                >\n                    {this.state.coor.map( place => {\n                        return place.province === this.state.targetProvince ?\n                            <Marker key={place.placeId}\n                                onClick={this.onMarkerClick}\n                                name={place.placeName}\n                                position={{lat: place.lat,lng: place.lon}}/>\n                            : null\n                        }\n                    )}\n\n                    <InfoWindow\n                        marker={this.state.activeMarker}\n                        visible={this.state.showingInfoWindow}>\n                        <p>{this.state.selectedPlace.name}</p>\n                    </InfoWindow>\n                </Map>\n            </div>\n        );\n    }\n}\n\n// export default MapContainer;\n\nexport default GoogleApiWrapper({\n    // apiKey: ('AIzaSyCoOZKGkK9Ili7RHCrB0dVNqhy6_e1yKyM')\n    apiKey: ('AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI')\n})(MapContainer)"]},"metadata":{},"sourceType":"module"}