{"ast":null,"code":"var _jsxFileName = \"/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv.js\";\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css'; // const REACT_APP_API_KEY = 'AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI';\n\nconst mapStyles = {\n  top: '0',\n  buttom: '0',\n  width: 'auto',\n  height: 'auto',\n  left: '300px'\n};\n\nclass MapContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      num_markers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n      provinceResponse: [],\n      placeResponse: [],\n      placeList: [],\n      coor: [],\n      clickedPlace: '',\n      targetProvince: '',\n      threadId: '',\n      threadTitle: '',\n      mapLat: \"\",\n      mapLon: \"\"\n    };\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true,\n      clickedPlace: props.name\n    });\n\n    this.onMapClicked = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`http://mars.mikelab.net:30011/getRankProvince`, {\n      params: {\n        provinceRank: this.props.match.params.rank\n      }\n    }).then(res => {\n      const provinceResponse = res.data[0];\n      this.setState({\n        provinceResponse\n      });\n      this.setState({\n        targetProvince: this.state.provinceResponse.provinceTh\n      });\n      const lat = this.state.provinceResponse.provinceLat;\n      const lon = this.state.provinceResponse.provinceLon;\n      this.setState({\n        mapLat: lat\n      });\n      this.setState({\n        mapLon: lon\n      });\n      return axios.get(`http://mars.mikelab.net:30011/getThreadData`, {\n        params: {\n          provinceTh: this.state.targetProvince\n        }\n      });\n    }).then(res => {\n      this.setState({\n        placeResponse: res.data.sort((a, b) => b.threadScore - a.threadScore)\n      });\n      var tmp = [];\n      this.state.placeResponse.map(row => row.coor.forEach(function (data) {\n        tmp.push(data);\n      }));\n      this.setState({\n        coor: tmp\n      });\n    });\n  }\n\n  render() {\n    const position = {\n      lat: this.state.mapLat,\n      lng: this.state.mapLon\n    };\n    const target = this.state.targetProvince;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"noscroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Helmet, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, \"Travel Guide | \", target)), /*#__PURE__*/React.createElement(NavbarMaps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidenav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidePlaceName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, this.state.targetProvince), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sideClickedPlace\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, this.state.clickedPlace), this.state.num_markers.map(num => /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, num)), this.state.placeResponse.map(thread => {\n      return thread.placeList.map(place => {\n        return place === this.state.clickedPlace ? /*#__PURE__*/React.createElement(\"a\", {\n          href: \"https://pantip.com/topic/\" + thread.threadId,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"sideLinkBox\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"sideLinkTitle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 41\n          }\n        }, thread.threadTitle))) : null;\n      });\n    })), /*#__PURE__*/React.createElement(Map, {\n      google: this.props.google,\n      style: mapStyles,\n      zoom: 11,\n      center: position,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"infoText\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, this.state.selectedPlace.name))));\n  }\n\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI'\n})(MapContainer);","map":{"version":3,"sources":["/Users/j.kanlaya/Downloads/Mike/website/geovisualization/src/pages/Maps/mapsProv.js"],"names":["React","Component","Helmet","Map","InfoWindow","Marker","GoogleApiWrapper","axios","NavbarMaps","mapStyles","top","buttom","width","height","left","MapContainer","state","showingInfoWindow","activeMarker","selectedPlace","num_markers","provinceResponse","placeResponse","placeList","coor","clickedPlace","targetProvince","threadId","threadTitle","mapLat","mapLon","onMarkerClick","props","marker","e","setState","name","onMapClicked","componentDidMount","get","params","provinceRank","match","rank","then","res","data","provinceTh","lat","provinceLat","lon","provinceLon","sort","a","b","threadScore","tmp","map","row","forEach","push","render","position","lng","target","num","thread","place","google","apiKey"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAAQC,GAAR,EAAaC,UAAb,EAAyBC,MAAzB,EAAiCC,gBAAjC,QAAwD,mBAAxD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,OAAO,YAAP,C,CAEA;;AAEA,MAAMC,SAAS,GAAG;AACdC,EAAAA,GAAG,EAAE,GADS;AAEdC,EAAAA,MAAM,EAAE,GAFM;AAGdC,EAAAA,KAAK,EAAE,MAHO;AAIdC,EAAAA,MAAM,EAAE,MAJM;AAKdC,EAAAA,IAAI,EAAE;AALQ,CAAlB;;AAQA,MAAMC,YAAN,SAA2Bd,SAA3B,CAAqC;AAAA;AAAA;AAAA,SACjCe,KADiC,GACzB;AACJC,MAAAA,iBAAiB,EAAE,KADf;AAEJC,MAAAA,YAAY,EAAE,EAFV;AAGJC,MAAAA,aAAa,EAAE,EAHX;AAIJC,MAAAA,WAAW,EAAE,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,EAAa,CAAb,EAAe,CAAf,EAAiB,CAAjB,EAAmB,EAAnB,EAAsB,EAAtB,EAAyB,EAAzB,EAA4B,EAA5B,EAA+B,EAA/B,EAAkC,EAAlC,EAAqC,EAArC,EAAwC,EAAxC,EAA2C,EAA3C,EAA8C,EAA9C,EAAiD,EAAjD,CAJT;AAKJC,MAAAA,gBAAgB,EAAC,EALb;AAMJC,MAAAA,aAAa,EAAC,EANV;AAOJC,MAAAA,SAAS,EAAC,EAPN;AAQJC,MAAAA,IAAI,EAAC,EARD;AASJC,MAAAA,YAAY,EAAE,EATV;AAUJC,MAAAA,cAAc,EAAE,EAVZ;AAWJC,MAAAA,QAAQ,EAAC,EAXL;AAYJC,MAAAA,WAAW,EAAE,EAZT;AAaJC,MAAAA,MAAM,EAAE,EAbJ;AAcJC,MAAAA,MAAM,EAAE;AAdJ,KADyB;;AAAA,SAsDjCC,aAtDiC,GAsDjB,CAACC,KAAD,EAAQC,MAAR,EAAgBC,CAAhB,KAChB,KAAKC,QAAL,CAAc;AACVhB,MAAAA,aAAa,EAAEa,KADL;AAEVd,MAAAA,YAAY,EAAEe,MAFJ;AAGVhB,MAAAA,iBAAiB,EAAE,IAHT;AAIVQ,MAAAA,YAAY,EAAEO,KAAK,CAACI;AAJV,KAAd,CAvDiC;;AAAA,SA8DjCC,YA9DiC,GA8DjBL,KAAD,IAAW;AACtB,UAAI,KAAKhB,KAAL,CAAWC,iBAAf,EAAkC;AAC9B,aAAKkB,QAAL,CAAc;AACVlB,UAAAA,iBAAiB,EAAE,KADT;AAEVC,UAAAA,YAAY,EAAE;AAFJ,SAAd;AAIH;AACJ,KArEgC;AAAA;;AAkBjCoB,EAAAA,iBAAiB,GAAG;AAChB/B,IAAAA,KAAK,CAACgC,GAAN,CAAW,+CAAX,EAA2D;AACvDC,MAAAA,MAAM,EAAE;AACJC,QAAAA,YAAY,EAAE,KAAKT,KAAL,CAAWU,KAAX,CAAiBF,MAAjB,CAAwBG;AADlC;AAD+C,KAA3D,EAKCC,IALD,CAKMC,GAAG,IAAI;AACT,YAAMxB,gBAAgB,GAAGwB,GAAG,CAACC,IAAJ,CAAS,CAAT,CAAzB;AACA,WAAKX,QAAL,CAAc;AAAEd,QAAAA;AAAF,OAAd;AACA,WAAKc,QAAL,CAAc;AAAET,QAAAA,cAAc,EAAE,KAAKV,KAAL,CAAWK,gBAAX,CAA4B0B;AAA9C,OAAd;AAEA,YAAMC,GAAG,GAAG,KAAKhC,KAAL,CAAWK,gBAAX,CAA4B4B,WAAxC;AACA,YAAMC,GAAG,GAAG,KAAKlC,KAAL,CAAWK,gBAAX,CAA4B8B,WAAxC;AACA,WAAKhB,QAAL,CAAc;AAAEN,QAAAA,MAAM,EAAEmB;AAAV,OAAd;AACA,WAAKb,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAEoB;AAAV,OAAd;AAEA,aAAO3C,KAAK,CAACgC,GAAN,CAAW,6CAAX,EAAyD;AAC5DC,QAAAA,MAAM,EAAE;AACJO,UAAAA,UAAU,EAAE,KAAK/B,KAAL,CAAWU;AADnB;AADoD,OAAzD,CAAP;AAKH,KApBD,EAqBCkB,IArBD,CAqBMC,GAAG,IAAI;AACT,WAAKV,QAAL,CAAc;AAAEb,QAAAA,aAAa,EAAEuB,GAAG,CAACC,IAAJ,CAASM,IAAT,CAAc,CAACC,CAAD,EAAGC,CAAH,KAAUA,CAAC,CAACC,WAAF,GAAcF,CAAC,CAACE,WAAxC;AAAjB,OAAd;AAEA,UAAIC,GAAG,GAAG,EAAV;AACA,WAAKxC,KAAL,CAAWM,aAAX,CAAyBmC,GAAzB,CAA6BC,GAAG,IAC5BA,GAAG,CAAClC,IAAJ,CAASmC,OAAT,CAAiB,UAASb,IAAT,EAAc;AAC3BU,QAAAA,GAAG,CAACI,IAAJ,CAASd,IAAT;AACH,OAFD,CADJ;AAKA,WAAKX,QAAL,CAAc;AAACX,QAAAA,IAAI,EAAEgC;AAAP,OAAd;AACH,KA/BD;AAgCH;;AAoBDK,EAAAA,MAAM,GAAG;AACL,UAAMC,QAAQ,GAAG;AAACd,MAAAA,GAAG,EAAE,KAAKhC,KAAL,CAAWa,MAAjB;AAAyBkC,MAAAA,GAAG,EAAE,KAAK/C,KAAL,CAAWc;AAAzC,KAAjB;AACA,UAAMkC,MAAM,GAAG,KAAKhD,KAAL,CAAWU,cAA1B;AAEA,wBACI;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAuBsC,MAAvB,CADJ,CADJ,eAII,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,eAKI;AAAK,MAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B,KAAKhD,KAAL,CAAWU,cAAvC,CADJ,eAEI;AAAK,MAAA,KAAK,EAAC,kBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+B,KAAKV,KAAL,CAAWS,YAA1C,CAFJ,EAGK,KAAKT,KAAL,CAAWI,WAAX,CAAuBqC,GAAvB,CAA4BQ,GAAG,iBAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,GAAL,CADH,CAHL,EAaK,KAAKjD,KAAL,CAAWM,aAAX,CAAyBmC,GAAzB,CAA8BS,MAAM,IAAI;AACrC,aAAOA,MAAM,CAAC3C,SAAP,CAAiBkC,GAAjB,CAAsBU,KAAK,IAAI;AAClC,eAAOA,KAAK,KAAK,KAAKnD,KAAL,CAAWS,YAArB,gBACH;AAAG,UAAA,IAAI,EAAE,8BAA4ByC,MAAM,CAACvC,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAK,UAAA,KAAK,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAK,UAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKuC,MAAM,CAACtC,WADZ,CADJ,CADJ,CADG,GAQD,IARN;AASH,OAVM,CAAP;AAWH,KAZA,CAbL,CALJ,eAiCI,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAE,KAAKI,KAAL,CAAWoC,MAAxB;AACI,MAAA,KAAK,EAAE3D,SADX;AAEI,MAAA,IAAI,EAAE,EAFV;AAGI,MAAA,MAAM,EAAEqD,QAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAoBI,oBAAC,UAAD;AACI,MAAA,MAAM,EAAE,KAAK9C,KAAL,CAAWE,YADvB;AAEI,MAAA,OAAO,EAAE,KAAKF,KAAL,CAAWC,iBAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2B,KAAKD,KAAL,CAAWG,aAAX,CAAyBiB,IAApD,CAHJ,CApBJ,CAjCJ,CADJ;AAmEH;;AA9IgC;;AAiJrC,eAAe9B,gBAAgB,CAAC;AAC5B+D,EAAAA,MAAM,EAAG;AADmB,CAAD,CAAhB,CAEZtD,YAFY,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport {Map, InfoWindow, Marker, GoogleApiWrapper} from 'google-maps-react';\nimport axios from \"axios\";\nimport NavbarMaps from '../../components/common/navbarMaps';\nimport './maps.css'\n\n// const REACT_APP_API_KEY = 'AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI';\n\nconst mapStyles = {\n    top: '0',\n    buttom: '0',\n    width: 'auto',\n    height: 'auto',\n    left: '300px',\n};\n\nclass MapContainer extends Component {    \n    state = {\n        showingInfoWindow: false,\n        activeMarker: {},\n        selectedPlace: {},\n        num_markers: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],\n        provinceResponse:[],        \n        placeResponse:[],\n        placeList:[], \n        coor:[],\n        clickedPlace: '',\n        targetProvince: '',\n        threadId:'',\n        threadTitle: '',\n        mapLat: \"\", \n        mapLon: \"\",\n    };\n\n    componentDidMount() {\n        axios.get(`http://mars.mikelab.net:30011/getRankProvince`, {\n            params: {\n                provinceRank: this.props.match.params.rank\n            }\n        })\n        .then(res => {\n            const provinceResponse = res.data[0];\n            this.setState({ provinceResponse });\n            this.setState({ targetProvince: this.state.provinceResponse.provinceTh });\n\n            const lat = this.state.provinceResponse.provinceLat;\n            const lon = this.state.provinceResponse.provinceLon;\n            this.setState({ mapLat: lat });\n            this.setState({ mapLon: lon });\n\n            return axios.get(`http://mars.mikelab.net:30011/getThreadData`, {\n                params: {\n                    provinceTh: this.state.targetProvince\n                }\n            });\n        })\n        .then(res => {\n            this.setState({ placeResponse: res.data.sort((a,b) =>  b.threadScore-a.threadScore) });\n\n            var tmp = []\n            this.state.placeResponse.map(row => \n                row.coor.forEach(function(data){\n                    tmp.push(data);\n                })\n            )\n            this.setState({coor: tmp});\n        })  \n    }\n\n\n    onMarkerClick = (props, marker, e) =>\n    this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true,\n        clickedPlace: props.name,\n    });\n\n    onMapClicked = (props) => {\n        if (this.state.showingInfoWindow) {\n            this.setState({\n                showingInfoWindow: false,\n                activeMarker: null\n            })\n        }\n    };\n\n    render() {\n        const position = {lat: this.state.mapLat, lng: this.state.mapLon};\n        const target = this.state.targetProvince;\n\n        return (  \n            <div class=\"noscroll\">\n                <Helmet>\n                    <title>Travel Guide | {target}</title>\n                </Helmet>\n                <NavbarMaps />\n                <div class=\"sidenav\">\n                    <div class=\"sidePlaceName\">{this.state.targetProvince}</div>\n                    <div class=\"sideClickedPlace\">{this.state.clickedPlace}</div>\n                    {this.state.num_markers.map( num => (\n                        <li>{num}</li>\n                    ))}\n\n                        {/* <img src={`https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&maxheight=400&photoreference=ATtYBwKOm3-AaHIVAeKfO2FcdI-aklSxYYILLlqV6xAjflHX4xTtgdHOAfs6yCyaOEDyvkxILAu_kuSnVwCY3VK1XmDDSUPI6j6HOI1tuDbyQdFsjcE9QUgLsMHtYWmzHCjH1VxTkVxhiqlhthGtzSZCS2ie48KSRIihzdisFWDX_PtsWIPw&key=${REACT_APP_API_KEY}`} \n                            alt={this.state.selectedPlace.name}\n                            width={168} \n                            className=\"center\"\n                        /> */}\n\n                    {this.state.placeResponse.map( thread => {\n                        return thread.placeList.map( place => {\n                            return place === this.state.clickedPlace ?\n                                <a href={\"https://pantip.com/topic/\"+thread.threadId}>\n                                    <div class=\"sideLinkBox\">\n                                        <div class=\"sideLinkTitle\">\n                                            {thread.threadTitle}\n                                        </div>\n                                    </div>  \n                                </a>\n                                : null\n                        })\n                    })}\n                </div>\n                \n                <Map google={this.props.google}\n                    style={mapStyles}\n                    zoom={11}\n                    center={position}\n                >\n\n                    {/* {this.state.num_markers.map( num => (\n                        <li>{num}</li>\n                    ))} */}\n\n                    {/* {this.state.coor.map( place => {\n                        return place.province === this.state.targetProvince ?\n                            <Marker key={place.placeId}\n                                onClick={this.onMarkerClick}\n                                name={place.placeName}\n                                position={{lat: place.lat,lng: place.lon}}/>\n                            : null\n                        }\n                    )} */}\n\n                    <InfoWindow\n                        marker={this.state.activeMarker}\n                        visible={this.state.showingInfoWindow}>\n                        <div className=\"infoText\">{this.state.selectedPlace.name}</div>\n                        {/* <img src={`https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&maxheight=400&photoreference=ATtYBwKOm3-AaHIVAeKfO2FcdI-aklSxYYILLlqV6xAjflHX4xTtgdHOAfs6yCyaOEDyvkxILAu_kuSnVwCY3VK1XmDDSUPI6j6HOI1tuDbyQdFsjcE9QUgLsMHtYWmzHCjH1VxTkVxhiqlhthGtzSZCS2ie48KSRIihzdisFWDX_PtsWIPw&key=${REACT_APP_API_KEY}`} \n                            alt={this.state.selectedPlace.name}\n                            width={168} \n                            className=\"center\"\n                        /> */}\n                    </InfoWindow>\n                </Map>\n            </div>\n        );\n    }\n}\n\nexport default GoogleApiWrapper({\n    apiKey: ('AIzaSyDDViAvlzx_1iSnaUKtNNLr-OuJpSeypjI')\n})(MapContainer)"]},"metadata":{},"sourceType":"module"}